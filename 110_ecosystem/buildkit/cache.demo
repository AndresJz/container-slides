# Preserve caches across builds

# Enable BuildKit
export DOCKER_BUILD=1

# First run creates cache
cat Dockerfile.cache-warm
docker build --progress plain --file Dockerfile.cache-warm .

# Second run uses cache
cat Dockerfile.cache-check
docker build --progress plain --file Dockerfile.cache-check .
